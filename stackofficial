#pragma config(Sensor, port2,  bumper,         sensorVexIQ_Touch)
#pragma config(Sensor, port3,  colour,         sensorVexIQ_Color12Color)
#pragma config(Motor,  motor1,          left,          tmotorVexIQ, PIDControl, driveLeft, encoder)
#pragma config(Motor,  motor6,          right,         tmotorVexIQ, PIDControl, reversed, driveRight, encoder)
#pragma config(Motor,  motor10,         lift,          tmotorVexIQ, PIDControl, encoder)
#pragma config(Motor,  motor11,         claw,          tmotorVexIQ, PIDControl, encoder)
//*!!Code automatically generated by 'ROBOTC' configuration wizard               !!*//


void cubeHolder()
{
	forward(180, degrees, 50);
	moveMotor(claw, 90, degrees, 50);
	moveMotor(lift, 3, rotations, 50);
	moveMotor(claw, 90, degrees, -50);
	moveMotor(lift, 3, rotations, -50);
}
void cubePickUp()
{
	forward(180, degrees, 50);
	moveMotor(claw, 90, degrees, 50);
	moveMotor(lift, 1, rotations, 50);
}
void cubeDrop()
{
	moveMotor(lift, 2, rotations, -50);
	moveMotor(claw, 90, degrees, -50);
}
void cubeHolderDrop()
{
	moveMotor(lift, 3, rotations, 50);
	moveMotor(claw, 90, degrees, 50);
	moveMotor(lift, 3, rotations, -50);
	moveMotor(claw, 90, degrees, -50);
}
void cubePushandStack()
{
	while (getBumperValue(bumper) == 1)
	{
		backward(1, rotations, 50);
		cubeDrop();
		cubeHolderDrop();
	}
}

void checkCubeColor()
{
	bool color; 
	while (color)
	{
		if (getColorName(colour) == colorGreen)
		{
			color = false;
		}
		if (getColorName(colour) == colorRed)
		{
			color = false;
			stopAllMotors();
		}
	}
}

task main()
{
	int i = 0;
	while (i != 3)
	{
		displayTextLine(1, "hello world");
		setMultipleMotors(50, left, right);	
		while (i == 0)
		{
			checkCubeColor();
			cubeHolder();
			i++;
		}
		while (i == 1)
		{
			checkCubeColor();
			cubePickUp();
			i++;
		}
		while (i == 2)
		{
			cubePushandStack();
			checkCubeColor();
			i++;
		}	
	}
}
